<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>Nester Interface</title>
        {{ dropzone.load_css() }}
        {{ dropzone.style('border: 2px dashed #0087F7; margin: 10%; min-height: 400px;') }}
    </head>
    <body>
        <h1>Nesting service</h1>
        <h2>Find nesting</h2>
        <form action="" method="post" enctype="multipart/form-data">
            {{ form.csrf_token() }}
            {% for field in form if field.name != "csrf_token" and field.name != "submit" %}
                <p>{{ field.label() }}</p>
                <p>{{ field }}
                    {% for error in field.errors %}
                    {{ error }}
                    {% endfor %}
                </p>
            {% endfor %}
        </form>

        <div>
            <p>Upload DXF files</p>
            {{ dropzone.create(action='index') }}
        </div>

        <button type="submit" id="submit-button" class="btn btn-primary">Submit</button>

        {{ dropzone.load_js() }}
        {{ dropzone.config(custom_init='dz = this;document.getElementById("submit-button").addEventListener("click", function handler(e) {dz.processQueue();});',
                 custom_options='autoProcessQueue: false, addRemoveLinks: false,') }}
    </body>
</html>
